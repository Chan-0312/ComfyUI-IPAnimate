{
  "last_node_id": 66,
  "last_link_id": 148,
  "nodes": [
    {
      "id": 12,
      "type": "ImpactValueSender",
      "pos": [
        1929,
        828
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "value",
          "type": "*",
          "link": 122,
          "label": "值",
          "slot_index": 0
        },
        {
          "name": "signal_opt",
          "type": "*",
          "link": null,
          "label": "signal_opt"
        }
      ],
      "outputs": [
        {
          "name": "signal",
          "type": "*",
          "links": null,
          "shape": 3,
          "label": "signal"
        }
      ],
      "properties": {
        "Node name for S&R": "ImpactValueSender"
      },
      "widgets_values": [
        1
      ]
    },
    {
      "id": 46,
      "type": "ShowText|pysssss",
      "pos": [
        1925,
        959
      ],
      "size": {
        "0": 319.0539245605469,
        "1": 116.03609466552734
      },
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 123,
          "widget": {
            "name": "text"
          },
          "label": "文本"
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": null,
          "shape": 6,
          "label": "字符串"
        }
      ],
      "properties": {
        "Node name for S&R": "ShowText|pysssss"
      },
      "widgets_values": [
        "",
        "{'index': 0, 'use_controlnet': True, 'image_index': (0, 1), 'ipadapter_strength': [0.9, 0.1], 'contronet_strength': [0.27, 0.03]}"
      ]
    },
    {
      "id": 37,
      "type": "EmptyLatentImage",
      "pos": [
        1931,
        1123
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            133
          ],
          "shape": 3,
          "label": "Latent",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [
        512,
        512,
        1
      ]
    },
    {
      "id": 38,
      "type": "VAEDecode",
      "pos": [
        2686,
        729
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 134,
          "label": "Latent"
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 128,
          "label": "VAE",
          "slot_index": 1
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            129
          ],
          "shape": 3,
          "label": "图像",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 52,
      "type": "PrimitiveNode",
      "pos": [
        2693,
        856
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            127
          ],
          "widget": {
            "name": "filename_prefix"
          },
          "label": "STRING"
        }
      ],
      "properties": {
        "Run widget replace on values": false
      },
      "widgets_values": [
        "IPA/01/0"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 51,
      "type": "SaveImage",
      "pos": [
        2950,
        738
      ],
      "size": {
        "0": 800,
        "1": 640
      },
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 129,
          "label": "图像"
        },
        {
          "name": "filename_prefix",
          "type": "STRING",
          "link": 127,
          "widget": {
            "name": "filename_prefix"
          },
          "slot_index": 1,
          "label": "文件名前缀"
        }
      ],
      "properties": {},
      "widgets_values": [
        "IPA/01/0"
      ]
    },
    {
      "id": 24,
      "type": "CLIPVisionLoader",
      "pos": [
        1022,
        1113
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "outputs": [
        {
          "name": "CLIP_VISION",
          "type": "CLIP_VISION",
          "links": [
            113
          ],
          "shape": 3,
          "label": "CLIP视觉",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPVisionLoader"
      },
      "widgets_values": [
        "clip_model.safetensors"
      ]
    },
    {
      "id": 23,
      "type": "IPAdapterModelLoader",
      "pos": [
        1017,
        1004
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "outputs": [
        {
          "name": "IPADAPTER",
          "type": "IPADAPTER",
          "links": [
            114
          ],
          "shape": 3,
          "label": "IP适配",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterModelLoader"
      },
      "widgets_values": [
        "ip-adapter_sd15_plus.pth"
      ]
    },
    {
      "id": 56,
      "type": "CheckpointLoaderSimple",
      "pos": [
        465,
        736
      ],
      "size": {
        "0": 400,
        "1": 120
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            140
          ],
          "shape": 3,
          "slot_index": 0,
          "label": "模型"
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            141
          ],
          "shape": 3,
          "slot_index": 1,
          "label": "CLIP"
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [],
          "shape": 3,
          "slot_index": 2,
          "label": "VAE"
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "v1-5-pruned.safetensors"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 55,
      "type": "CLIPSetLastLayer",
      "pos": [
        1016,
        762
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 141,
          "label": "CLIP"
        }
      ],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            139
          ],
          "shape": 3,
          "label": "CLIP",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPSetLastLayer"
      },
      "widgets_values": [
        -2
      ]
    },
    {
      "id": 20,
      "type": "CLIPTextEncode",
      "pos": [
        1023,
        870
      ],
      "size": {
        "0": 299.464599609375,
        "1": 85.85469055175781
      },
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 139,
          "label": "CLIP",
          "slot_index": 0
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            115,
            116
          ],
          "shape": 3,
          "label": "条件",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        ""
      ]
    },
    {
      "id": 60,
      "type": "TilePreprocessor",
      "pos": [
        1024,
        1335
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 147,
          "label": "图像"
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            146
          ],
          "shape": 3,
          "label": "图像",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "TilePreprocessor"
      },
      "widgets_values": [
        3,
        512
      ]
    },
    {
      "id": 44,
      "type": "ControlNetLoader",
      "pos": [
        1027,
        1224
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [
            126
          ],
          "shape": 3,
          "label": "ControlNet",
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": [
        "control_v11p_sd15_lineart_fp16.safetensors"
      ]
    },
    {
      "id": 61,
      "type": "Note",
      "pos": [
        1378,
        1469
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 6,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "注意：每次启动需要设置为value=0"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 62,
      "type": "Note",
      "pos": [
        2687,
        979
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "注意：请固定随机种子"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 63,
      "type": "VHS_VideoCombine",
      "pos": [
        2338.4211396703395,
        1385.7629311208566
      ],
      "size": [
        210,
        454
      ],
      "flags": {},
      "order": 15,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 148,
          "label": "图像"
        },
        {
          "name": "audio",
          "type": "VHS_AUDIO",
          "link": null,
          "label": "audio"
        }
      ],
      "outputs": [
        {
          "name": "GIF",
          "type": "GIF",
          "links": null,
          "shape": 3,
          "label": "GIF"
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 10,
        "loop_count": 0,
        "filename_prefix": "ipa",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "inpippop_00004.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4"
          }
        }
      },
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 64,
      "type": "VHS_LoadImagesPath",
      "pos": [
        1950,
        1385
      ],
      "size": [
        315,
        194
      ],
      "flags": {},
      "order": 8,
      "mode": 4,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            148
          ],
          "shape": 3,
          "slot_index": 0,
          "label": "图像"
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3,
          "label": "遮罩"
        },
        {
          "name": "INT",
          "type": "INT",
          "links": null,
          "shape": 3,
          "label": "整数"
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_LoadImagesPath"
      },
      "widgets_values": {
        "directory": "/root/autodl-tmp/outputs/IPA/01/",
        "image_load_cap": 0,
        "skip_first_images": 0,
        "select_every_nth": 1,
        "choose folder to upload": "image",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "frame_load_cap": 0,
            "skip_first_images": 0,
            "filename": "/root/autodl-tmp/outputs/IPA/01/",
            "type": "path",
            "format": "folder",
            "select_every_nth": 1
          }
        }
      },
      "color": "#233",
      "bgcolor": "#355"
    },
    {
      "id": 65,
      "type": "Note",
      "pos": [
        2692,
        1088
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "注意：请设置auto Queue"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 66,
      "type": "Note",
      "pos": [
        1956,
        1652
      ],
      "size": {
        "0": 210,
        "1": 58
      },
      "flags": {},
      "order": 10,
      "mode": 4,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "注意：生成完视频后，可基于该流合并成视频"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 54,
      "type": "KSampler //Inspire",
      "pos": [
        2285,
        729
      ],
      "size": {
        "0": 311.197509765625,
        "1": 362.55767822265625
      },
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 130,
          "label": "模型"
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 131,
          "label": "正面条件"
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 132,
          "label": "负面条件"
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 133,
          "label": "Latent"
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            134
          ],
          "shape": 3,
          "slot_index": 0,
          "label": "Latent"
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler //Inspire"
      },
      "widgets_values": [
        123456,
        "fixed",
        18,
        6,
        "dpmpp_2m",
        "karras",
        1,
        "GPU(=A1111)",
        "incremental",
        0,
        0
      ]
    },
    {
      "id": 57,
      "type": "VHS_LoadImagesPath",
      "pos": [
        495,
        465
      ],
      "size": [
        315,
        194
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            142,
            143,
            147
          ],
          "shape": 3,
          "slot_index": 0,
          "label": "图像"
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null,
          "shape": 3,
          "label": "遮罩"
        },
        {
          "name": "INT",
          "type": "INT",
          "links": [],
          "shape": 3,
          "slot_index": 2,
          "label": "整数"
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_LoadImagesPath"
      },
      "widgets_values": {
        "directory": "/root/autodl-tmp/ipa/",
        "image_load_cap": 0,
        "skip_first_images": 0,
        "select_every_nth": 1,
        "choose folder to upload": "image",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "frame_load_cap": 0,
            "skip_first_images": 0,
            "filename": "/root/autodl-tmp/ipa/",
            "type": "path",
            "format": "folder",
            "select_every_nth": 1
          }
        }
      },
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 49,
      "type": "IPAdapterAnimate",
      "pos": [
        1463,
        726
      ],
      "size": {
        "0": 400,
        "1": 434
      },
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 142,
          "label": "images",
          "slot_index": 0
        },
        {
          "name": "model",
          "type": "MODEL",
          "link": 140,
          "label": "model"
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 115,
          "label": "positive"
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 116,
          "label": "negative"
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "link": 114,
          "label": "ipadapter"
        },
        {
          "name": "clip_vision",
          "type": "CLIP_VISION",
          "link": 113,
          "label": "clip_vision"
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 126,
          "label": "control_net",
          "slot_index": 6
        },
        {
          "name": "control_images",
          "type": "IMAGE",
          "link": 146,
          "label": "control_images"
        },
        {
          "name": "index",
          "type": "INT",
          "link": 121,
          "widget": {
            "name": "index"
          },
          "label": "index"
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            130
          ],
          "shape": 3,
          "label": "MODEL",
          "slot_index": 0
        },
        {
          "name": "POSITIVE",
          "type": "CONDITIONING",
          "links": [
            131
          ],
          "shape": 3,
          "label": "POSITIVE",
          "slot_index": 1
        },
        {
          "name": "NEGATIVE",
          "type": "CONDITIONING",
          "links": [
            132
          ],
          "shape": 3,
          "label": "NEGATIVE",
          "slot_index": 2
        },
        {
          "name": "NET_INDEX",
          "type": "INT",
          "links": [
            122
          ],
          "shape": 3,
          "label": "NET_INDEX",
          "slot_index": 3
        },
        {
          "name": "LOGS",
          "type": "STRING",
          "links": [
            123
          ],
          "shape": 3,
          "label": "LOGS",
          "slot_index": 4
        }
      ],
      "properties": {
        "Node name for S&R": "IPAdapterAnimate"
      },
      "widgets_values": [
        0,
        "linear",
        10,
        "8,4",
        "linear",
        "(0.1,0.9)",
        "(0.0,0.5),(0.0,1.0),",
        1,
        0.3
      ]
    },
    {
      "id": 53,
      "type": "VAELoader",
      "pos": [
        2275,
        1162
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            128
          ],
          "shape": 3,
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAELoader"
      },
      "widgets_values": [
        "vae-ft-mse-840000-ema-pruned.safetensors"
      ]
    },
    {
      "id": 10,
      "type": "ImpactValueReceiver",
      "pos": [
        1019,
        1463
      ],
      "size": {
        "0": 315,
        "1": 106
      },
      "flags": {},
      "order": 13,
      "mode": 0,
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": [
            121
          ],
          "shape": 3,
          "slot_index": 0,
          "label": "输出"
        }
      ],
      "properties": {
        "Node name for S&R": "ImpactValueReceiver"
      },
      "widgets_values": [
        "INT",
        1,
        1
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 58,
      "type": "PreviewImage",
      "pos": [
        1020,
        109
      ],
      "size": [
        697.333975402832,
        525.8085704956055
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 143,
          "label": "图像"
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    }
  ],
  "links": [
    [
      113,
      24,
      0,
      49,
      5,
      "CLIP_VISION"
    ],
    [
      114,
      23,
      0,
      49,
      4,
      "IPADAPTER"
    ],
    [
      115,
      20,
      0,
      49,
      2,
      "CONDITIONING"
    ],
    [
      116,
      20,
      0,
      49,
      3,
      "CONDITIONING"
    ],
    [
      121,
      10,
      0,
      49,
      8,
      "INT"
    ],
    [
      122,
      49,
      3,
      12,
      0,
      "*"
    ],
    [
      123,
      49,
      4,
      46,
      0,
      "STRING"
    ],
    [
      126,
      44,
      0,
      49,
      6,
      "CONTROL_NET"
    ],
    [
      127,
      52,
      0,
      51,
      1,
      "STRING"
    ],
    [
      128,
      53,
      0,
      38,
      1,
      "VAE"
    ],
    [
      129,
      38,
      0,
      51,
      0,
      "IMAGE"
    ],
    [
      130,
      49,
      0,
      54,
      0,
      "MODEL"
    ],
    [
      131,
      49,
      1,
      54,
      1,
      "CONDITIONING"
    ],
    [
      132,
      49,
      2,
      54,
      2,
      "CONDITIONING"
    ],
    [
      133,
      37,
      0,
      54,
      3,
      "LATENT"
    ],
    [
      134,
      54,
      0,
      38,
      0,
      "LATENT"
    ],
    [
      139,
      55,
      0,
      20,
      0,
      "CLIP"
    ],
    [
      140,
      56,
      0,
      49,
      1,
      "MODEL"
    ],
    [
      141,
      56,
      1,
      55,
      0,
      "CLIP"
    ],
    [
      142,
      57,
      0,
      49,
      0,
      "IMAGE"
    ],
    [
      143,
      57,
      0,
      58,
      0,
      "IMAGE"
    ],
    [
      146,
      60,
      0,
      49,
      7,
      "IMAGE"
    ],
    [
      147,
      57,
      0,
      60,
      0,
      "IMAGE"
    ],
    [
      148,
      64,
      0,
      63,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "title": "合成视频",
      "bounding": [
        1931,
        1288,
        646,
        568
      ],
      "color": "#3f789e",
      "font_size": 24,
      "locked": false
    }
  ],
  "config": {},
  "extra": {},
  "version": 0.4
}